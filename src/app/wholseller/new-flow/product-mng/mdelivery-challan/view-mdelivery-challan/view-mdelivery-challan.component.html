<section class="content">
  <div class="content-block">
      <h4 class="mt-4">
          <i class="bi bi-person-vcard-fill h3"></i> Check Received Product
      </h4>

      <div id="purchase-order" class="challan-container card my-2">
          <section>
              <div *ngIf="mergedProducts.length > 0; else noData">
                  <p-table [value]="mergedProducts" class="bordered-table">
                      <ng-template pTemplate="header">
                          <tr>
                              <th>Design No</th>
                              <th>Colour</th>
                              <th *ngFor="let size of sizeHeaders">
                                  {{ size }} <br />
                                  <span *ngIf="!isSizeAvailable(mergedProducts, size)">N/A</span>
                              </th>
                          </tr>
                      </ng-template>

                      <ng-template pTemplate="body" let-row>
                          <tr>
                              <td>{{ row.designNumber }}</td>
                              <td>{{ row.colourName }}</td>
                              <td *ngFor="let size of sizeHeaders">
                                  <div>
                                      <strong>Ordered:</strong> {{ row.quantities[size] ?? 'N/A' }} <br>
                                      <strong>Available:</strong> {{ row.availableQuantities[size] ?? 'N/A' }}
                                  </div>
                              </td>
                          </tr>
                      </ng-template>
                  </p-table>
              </div>
              <ng-template #noData>
                  <p>No data available</p>
              </ng-template>
          </section>
      </div>
  </div>
</section>
