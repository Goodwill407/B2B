<section class="content">
  <div class="content-block">
    <!-- Heading -->
    <h4 class="mt-4">
      <i class="bi bi-person-vcard-fill h3"></i>
      Quantity Updated PO List
    </h4>

    <!-- Card wrapper -->
    <div class="card mt-3 p-4">
      <mat-tab-group>

        <!-- Partial Delivery TAB -->
        <mat-tab label="Partial">
          <div class="card mt-3 p-4">
            <div class="p-grid p-fluid">
              <div class="p-col-12 text-center">
                <p-table [value]="partialData">
                  <ng-template pTemplate="header">
                    <tr>
                      <th>Sr. No.</th>
                      <th>Manufacturer's Name</th>
                      <th>Company Name</th>
                      <th>Email</th>
                      <th>PO Number</th>
                      <th>PO Date</th>
                      <!-- <th>Status</th> -->
                      <th>View PO</th>
                      <th>view Allocation</th>
                    </tr>
                  </ng-template>
                  <ng-template pTemplate="body" let-po let-rowIndex="rowIndex">
                    <tr>
                      <td>{{ rowIndex + 1 + (partialPage - 1) * partialLimit }}</td>
                      <td>{{ po.manufacturer.fullName }}</td>
                      <td>{{ po.manufacturer.companyName }}</td>
                      <td>{{ po.manufacturer.email }}</td>
                      <td>{{ po.poNumber }}</td>
                      <td>{{ po.wholesalerPODateCreated | date:'dd/MM/yyyy HH:mm' }}</td>
                      <!-- <td>
                        {{
                          po.statusAll === 'm_partial_delivery'
                            ? 'Partial Delivery'
                            : po.statusAll
                        }}
                      </td> -->
                      <td>
                        <button
                          class="btn"
                          [routerLink]="[
                            '/wholesaler/new/product/view-po-quantity-updated-bymfg',
                            { id: po.id }
                          ]"
                        >
                          <i class="bi bi-eye h5"></i>
                        </button>
                      </td>
                      <td>
                        <button
                          class="btn"
                          [routerLink]="[
                            '/wholesaler/new/product/view-partial-quantity-ret-po',
                            { id: po.id }
                          ]"
                        >
                          <i class="bi bi-eye h5"></i>
                        </button>
                      </td>
                    </tr> 
                  </ng-template>
                </p-table>

                <div
                  *ngIf="partialData.length === 0"
                  class="data-not-found mt-3 d-flex justify-content-center align-items-center"
                >
                  <p>Your Partial Delivery PO list is currently empty.</p>
                </div>

                <p-paginator
                  *ngIf="partialData.length > 0"
                  (onPageChange)="onPartialPageChange($event)"
                  [first]="partialFirst"
                  [rows]="partialRows"
                  [totalRecords]="totalPartialResults"
                  [rowsPerPageOptions]="[10, 20, 30]"
                >
                </p-paginator>
              </div>
            </div>
          </div>
        </mat-tab>

        <!-- Confirmed Delivery TAB -->
        <mat-tab label="Confirmed">
          <div class="card mt-3 p-4">
            <div class="p-grid p-fluid">
              <div class="p-col-12 text-center">
                <p-table [value]="confirmedData">
                  <ng-template pTemplate="header">
                    <tr>
                      <th>Sr. No.</th>
                      <th>Manufacturer's Name</th>
                      <th>Company Name</th>
                      <th>Email</th>
                      <th>PO Number</th>
                      <th>PO Date</th>
                      <!-- <th>Status</th> -->
                      <th>View</th>
                    </tr>
                  </ng-template>
                  <ng-template pTemplate="body" let-po let-rowIndex="rowIndex">
                    <tr>
                      <td>{{ rowIndex + 1 + (confirmedPage - 1) * confirmedLimit }}</td>
                      <td>{{ po.manufacturer.fullName }}</td>
                      <td>{{ po.manufacturer.companyName }}</td>
                      <td>{{ po.manufacturer.email }}</td>
                      <td>{{ po.poNumber }}</td>
                      <td>{{ po.wholesalerPODateCreated | date:'dd/MM/yyyy HH:mm' }}</td>
                      <!-- <td>
                        {{
                          po.statusAll === 'm_order_confirmed'
                            ? 'Manufacturer Confirmed'
                            : po.statusAll
                        }}
                      </td> -->
                      <td>
                        <button
                          class="btn"
                          [routerLink]="[
                            '/wholesaler/new/product/view-po-quantity-updated-bymfg',
                            { id: po.id }
                          ]"
                        >
                          <i class="bi bi-eye h5"></i>
                        </button>
                      </td>
                    </tr>
                  </ng-template>
                </p-table>

                <div
                  *ngIf="confirmedData.length === 0"
                  class="data-not-found mt-3 d-flex justify-content-center align-items-center"
                >
                  <p>Your Confirmed Delivery PO list is currently empty.</p>
                </div>

                <p-paginator
                  *ngIf="confirmedData.length > 0"
                  (onPageChange)="onConfirmedPageChange($event)"
                  [first]="confirmedFirst"
                  [rows]="confirmedRows"
                  [totalRecords]="totalConfirmedResults"
                  [rowsPerPageOptions]="[10, 20, 30]"
                >
                </p-paginator>
              </div>
            </div>
          </div>
        </mat-tab>

      </mat-tab-group>
    </div>
  </div>
</section>
