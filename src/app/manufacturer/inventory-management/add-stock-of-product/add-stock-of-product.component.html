<section class="content">
  <div class="content-block">
    <h4 class="mt-4">
      <i class="bi bi-person-vcard-fill h3"></i> Add Stock for Product
    </h4>

    <div class="card shadow-sm p-4 mt-3">
        
      <div class="d-flex flex-wrap align-items-center gap-4 mb-3">

        <!-- Add Quantity -->
        <div class="d-flex align-items-center gap-2 mb-3">
          <label class="fw-semibold mb-0">Add Quantity in All Items:</label>
          <input
            type="number"
            class="form-control"
            [(ngModel)]="universalQuantity"
            placeholder="e.g. 10"
            min="0"
            style="width: 120px"
          />
          <button class="btn btn-sm btn-light-muted" (click)="applyUniversalQuantity()">
            Add
          </button>
        </div>

        <!-- Add Min Quantity Alert -->
        <div class="d-flex align-items-center gap-2 mb-3">
          <label class="fw-semibold mb-0" style="white-space: nowrap;">Set Min Quantity Alert for All Items:</label>
          <input
            type="number"
            class="form-control"
            [(ngModel)]="universalAlert"
            placeholder="e.g. 5"
            min="0"
            style="width: 120px;"
          />
          <button class="btn btn-sm btn-light-muted" (click)="applyUniversalAlert()">
            Set
          </button>
        </div>

        <!-- Total Quantity -->
        <div class="d-flex align-items-center my-2 mb-4">
          <label class="fw-bold text-primary">Current Total Quantity: {{ totalQuantity }}</label>
        </div>

      </div>

      <p-table
        [value]="inventoryStock"
        [scrollable]="true"
        scrollHeight="450px"
        class="p-datatable-sm"
      >
        <ng-template pTemplate="header">
          <tr>
            <th>Sr. No.</th>
            <th>Design No.</th>
            <th>Colour</th>
            <th>Color Name</th>
            <th>Standard Size</th>
            <th>Brand Size</th>
            <th>Quantity</th>
            <th>Min Quantity for Alert</th>
          </tr>
        </ng-template>

        <ng-template pTemplate="body" let-product let-i="rowIndex">
          <tr>
            <td>{{ i + 1 }}</td>
            <td>{{product.designNumber}}</td>
            <td>
              <div
                class="color-box"
                [style.background]="product.colour"
                [title]="product.colour"
              ></div>
            </td>
            <td>{{ product.colourName }}</td>
            <td>{{ product.standardSize }}</td>
            <td>{{ product.brandSize }}</td>
            <td style="text-align: center; vertical-align: middle;">
                <div class="input-wrapper">
                    <input
                type="number"
                class="form-control"
                [(ngModel)]="product.quantity"
                min="1"
                (ngModelChange)="validateQuantity(product)"
                (keydown)="blockInvalidKeys($event)"
              />
                </div>
            </td>
            <td style="text-align: center; vertical-align: middle;">
            <div class="input-wrapper">
              <input
                type="number"
                class="form-control"
                [(ngModel)]="product.minimumQuantityAlert"
                min="1"
                (ngModelChange)="validateAlert(product)"
                (keydown)="blockInvalidKeys($event)"
              />
              </div>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>

    <div class="text-center mt-4">
      <button
        type="button"
        class="btn btn-primary px-4 py-2"
        (click)="submitStock()"
      >
        <i class="bi bi-box-arrow-in-down"></i> Add Stock
      </button>
    </div>
  </div>
</section>